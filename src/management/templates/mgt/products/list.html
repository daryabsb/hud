{% extends 'base.html' %}
{% load mptt_tags %}
		{% comment %} <div>
			<ul class="breadcrumb">
				<li class="breadcrumb-item"><a href="/mgt/">MANAGEMENT</a></li>
				<li class="breadcrumb-item active">PRODUCTS</li>
			</ul>
			<h1 class="page-header mb-0">Products</h1>
		</div> {% endcomment %}
{% block content %}
<div id="content" class="app-content d-flex flex-column">
	<div class="d-flex align-items-center mb-3">
		<div>
			<ul class="breadcrumb">
				<li class="breadcrumb-item"><a href="/mgt/">MANAGEMENT</a></li>
				<li class="breadcrumb-item active">PRODUCTS</li>
			</ul>
			<h1 class="page-header mb-0">Products</h1>
		</div>
		<div class="ms-auto">
			{% comment %} _="on click toggle .active" {% endcomment %}
			<a  class="btn btn-outline-theme" id="add-product"
			hx-get="{% url 'mgt:modal-add-product' %}" 
			hx-target="#modalAddProduct" 
			hx-trigger="click"
			href="#modalAddProduct" data-bs-toggle="modal"
			><i class="fa fa-plus-circle fa-fw me-1"></i> Add Product</a>
		</div>
	</div>
	<div class="card flex-1 m-0 d-flex flex-column overflow-hidden rounded-0">
		<div class="card-header fw-bold small d-flex">
			<span class="flex-grow-1">File Manager</span>
			<a href="#" data-toggle="card-expand" class="text-white text-opacity-50 text-decoration-none"><i
				class="fa fa-fw fa-expand"></i> EXPAND</a>
		</div>
		<div class="card-body p-0 flex-1 overflow-hidden">
			<div class="file-manager h-100" id="fileManager">
				<div class="file-manager-toolbar">
					<button type="button" class="btn border-0"><i class="bi bi-plus-lg me-1"></i> File</button>
					<button type="button" class="btn border-0"><i class="bi bi-plus-lg me-1"></i>
					Folder</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-copy"></i>
					Copy</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-arrows-move"></i>
					Move</button>
					<button type="button" class="btn border-0"><i class="bi me-1 bi-upload"></i> Upload</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-download"></i>
					Download</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-trash"></i>
					Delete</button>
					<button type="button" class="btn border-0" disabled><i
						class="bi me-1 bi-arrow-clockwise"></i> Restore</button>
					<button type="button" class="btn border-0" disabled><i
						class="bi me-1 bi-file-earmark-text"></i> Rename</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-pen"></i>
					Edit</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-pencil-square"></i>
					HTML Editor</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-key"></i>
					Permissions</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-eye"></i>
					View</button>
					<button type="button" class="btn border-0" disabled><i class="bi me-1 bi-unlock"></i>
					Extract</button>
					<button type="button" class="btn border-0" disabled><i
						class="bi me-1 bi-file-earmark-zip"></i> Compress</button>
				</div>
				<div class="file-manager-container">
					<div class="file-manager-sidebar">
						<div class="file-manager-sidebar-mobile-toggler">
							<button type="button" class="btn"
								data-toggle-class="file-manager-sidebar-mobile-toggled"
								data-toggle-target="#fileManager"><i class="far fa-lg fa-folder"></i></button>
						</div>
						<div class="file-manager-sidebar-content">
							<div data-scrollbar="true" data-height="100%" class="p-3">
								<input type="text" class="form-control form-control-sm mb-3"
									placeholder="Seach file..." />
								
								<div class="file-tree mb-3">
								{% recursetree groups %}
									<div class="file-node {% if not node.is_leaf_node %}has-sub{% endif %} expand selected">
										<a 
										hx-get="{% url 'mgt:filter-products' slug=node.slug %}"
										hx-target="#mgt-products-table"
										hx-swap="innerHTML"
										href="#" class="file-link" data-filter="parent-{{ node.id }}">
										<span class="file-arrow"></span>
										<span class="file-info">
										<span class="file-icon"><i
											class="fa fa-folder fa-lg text-warning"></i></span>
										<span class="file-text">{{ node.name }}</span>
										</span>
										</a>
										<!-- starting the first list -->
										{% if not node.is_leaf_node %}
										<div class="file-tree">
											{{ children }}
										</div>
										{% endif %}
									</div>
									{% endrecursetree %}
								</div>
							</div>
						</div>
						<div class="file-manager-sidebar-footer">
							<div class="d-flex align-items-center">
								<div class="mx-n1">
									<span class="iconify fa-2x text-theme"
										data-icon="solar:ssd-square-bold-duotone"></span>
								</div>
								<div class="flex-1 ps-3 small">
									<div class="fw-bold small">SSD Storage:</div>
									<div class="progress h-5px my-1">
										<div class="progress-bar progress-bar-striped bg-theme"
											style="width: 80%"></div>
									</div>
									<div class="fw-bold text-body text-opacity-50 small">
										<b class="text-body">127.7GB</b> free of <b class="text-body">256GB</b>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="file-manager-content d-flex flex-column">
						<div class="mb-0 d-flex flex-wrap text-nowrap px-10px pt-10px pb-0 border-bottom">
							<button type="button" class="btn btn-sm btn-default me-2 mb-10px px-2"><i
								class="fa fa-fw fa-home"></i></button>
							<button type="button" class="btn btn-sm btn-default me-2 mb-10px" disabled><i
								class="fa fa-fw fa-arrow-turn-up ms-n1"></i> Up One Level</button>
							<div class="btn-group me-2 mb-10px">
								<button type="button" class="btn btn-sm btn-default" disabled><i
									class="fa me-1 fa-arrow-left"></i> Back</button>
								<button type="button" class="btn btn-sm btn-default" disabled><i
									class="fa me-1 fa-arrow-right"></i> Forward</button>
							</div>
							<button type="button" class="btn btn-sm btn-default me-2 mb-10px px-2"><i
								class="fa fa-fw fa-arrows-rotate"></i></button>
							<div class="btn-group me-2 mb-10px">
								<button type="button" class="btn btn-sm btn-default"
								_="on click set .product-select-checkbox.checked to true"
								><i class="fa fa-fw fa-check ms-n1"></i> Select All</button>
								<button type="button" class="btn btn-sm btn-default"
								_="on click set .product-select-checkbox.checked to false"
								><i
									class="far fa-fw fa-square ms-n1"></i> Unselect All</button>
							</div>
						</div>
						<div class="flex-1 overflow-hidden">
							<div id="mgt-products-table" data-scrollbar="true" data-skip-mobile="true" data-height="32rem" class="p-0"  >
							{% include 'mgt/products/partials/products-table.html' %}
							</div>
						</div>
						<div class="border-top p-2">
							<div class="d-md-flex align-items-center" id="mgt-products-table-pagination">
								<div class="me-md-auto text-md-left text-center mb-2 mb-md-0">
									Page {{ products.number }} of {{ products.paginator.num_pages }}
								</div>
								<ul class="pagination mb-0 justify-content-center">
									{% if products.has_previous %}
									<li class="page-item"><a class="page-link" href="#">1</a></li>
									<li class="page-item"><a href="#" class="page-link" hx-get="?page=1" 
										hx-target="#mgt-products-table" hx-swap="innerHTML">&laquo; first</a></li>
									<li class="page-item"><a href="#" class="page-link" hx-get="?page={{ products.previous_page_number }}" 
										hx-target="#mgt-products-table" hx-swap="innerHTML">previous|{{ products.previous_page_number }}</a></li>
									{% else %}
									<li class="page-item disabled"><a class="page-link">Previous</a></li>
									{% endif %}
									<li class="page-item"><a class="page-link" href="#">1</a></li>
									<li class="page-item active"><a class="page-link" href="#">2</a></li>
									<li class="page-item"><a class="page-link" href="#">3</a></li>
									<li class="page-item"><a class="page-link" href="#">4</a></li>
									<li class="page-item"><a class="page-link" href="#">5</a></li>
									<li class="page-item"><a class="page-link" href="#">6</a></li>
									{% if products.has_next %}
										<li class="page-item"><a href="#" class="page-link" hx-get="?page={{ products.next_page_number }}" 
											hx-target="#mgt-products-table" hx-swap="innerHTML">next | {{ products.next_page_number }}</a></li>
										<li class="page-item"><a href="#" class="page-link" hx-get="?page={{ products.paginator.num_pages }}" 
											hx-target="#mgt-products-table" hx-swap="innerHTML">last &raquo;</a></li>
									{% else %}
									<li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
									{% endif %}
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="card-arrow">
			<div class="card-arrow-top-left"></div>
			<div class="card-arrow-top-right"></div>
			<div class="card-arrow-bottom-left"></div>
			<div class="card-arrow-bottom-right"></div>
		</div>
	</div>
</div>
{% endblock content %}