{% extends 'pos/pos_base.html' %}
{% load static %}
{% block extra_content %}{{ orders.first }}{% endblock %}
{% block pos_content %}
<style>
    #drag-handle {
        background-color: #666;
        cursor: ew-resize;
        z-index: 10;
        position: relative;
    }
    #container1, #container2 {
        {% comment %} transition: width 0.200ms ease; {% endcomment %}
        min-width: 250px; /* Enforce minimum width visually */
    }
</style>
    <div class="card-header align-items-center">
      <div class="col-lg-6">
      {% include 'pos/partials/barcode-input.html' %}
      </div>
      <div class="col-lg-3 bg-danger"></div>
      <div class="col-lg-3 bg-warning"></div>
      
    </div>
    <div class="pos-container card-body" style="width: 100%;">
        

        <div class="pos-content" id="container1" style="width: 44%; min-width: 40%;">
             <div class="pos-content-container h-100 p-1" >
                
                <div class="row">
                    <div class="col-xxl-12 mb-2">
                        <ul class="nav nav-tabs nav-tabs-v2 px-4" role="tablist">
                        {% for order in orders %}
                            <li class="nav-item me-3" role="presentation">
                            <a href="#order-tab-{{ order.number }}" class="nav-link {% if forloop.first %}active{% endif %} px-2" 
                            data-bs-toggle="tab" aria-selected="true" role="tab">{{ order.number }}</a></li>
                        {% endfor %}
                           
                        </ul>
                    </div>
                    {% comment %} <div class="col-xxl-12">
                    {% include 'pos/partials/barcode-input.html' %}
                    </div> {% endcomment %}
                </div>
                <div class="tab-content p-2 row">
                {% for order in orders %}

                    <div class="col-xxl-12 tab-pane fade {% if forloop.first %}show active{% endif %}"
                    id="order-tab-{{ order.number }}"
                    >
                    {% include 'pos/standard/order/detail.html' %}
                    </div>
                    {% endfor %}
                </div>
               
            </div>
        </div>
        <div class="pos-sidebar position-relative" id="container2" style="width: 44%;">
            
            {% include 'pos/partials/order-detail.html' %}
            <div class="position-absolute start-3 top-50 d-flex align-items-center justify-content-center" id="drag-handle">
                <i class="fas fa-2xl fa-ellipsis-v"></i>
            </div>
        </div>
    </div>
    {% include 'components/card-arrow.html' %}

{% endblock pos_content %}

{% block additional_js %}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        interact('#drag-handle').draggable({
            axis: 'x', // Restrict movement to horizontal dragging
            listeners: {
                move(event) {
                    const container1 = document.getElementById('container1');
                    const container2 = document.getElementById('container2');
    
                    // Get the current widths
                    const container1Width = parseFloat(window.getComputedStyle(container1).width);
                    const container2Width = parseFloat(window.getComputedStyle(container2).width);
    
                    // Set minimum width in pixels
                    const minWidth = 250;
    
                    // Calculate new widths
                    const deltaX = event.dx;
                    const newContainer1Width = container1Width + deltaX;
                    const newContainer2Width = container2Width - deltaX;
    
                    // Apply new widths with minimum width constraint
                    if (newContainer1Width >= minWidth && newContainer2Width >= minWidth) {
                        container1.style.width = `${newContainer1Width}px`;
                        container2.style.width = `${newContainer2Width}px`;
                    }
                }
            }
        });
    });
    </script>
    
    
{% endblock additional_js %}